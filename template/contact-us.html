{% extends 'index.html' %}
{% block title %}Contact Us{% endblock %}
{% block content %}

<div id="contact-page" class="container">
    <div class="bg">
        <!-- Messages Display (at the top) -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <div class="row"> 
            <div class="col-sm-12">    			   			
                <h2 class="title text-center">Contact <strong>Us</strong></h2>    			    				    				
                <div id="gmap" class="contact-map mt-4">
                    <!-- Embedded Google Map -->
                    <div class="col-lg-12">
                        <div class="h-100 rounded">
                            <iframe class="rounded w-100" 
                                style="height: 400px; width: 100%;" 
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3671.0783840356717!2d72.51826947477124!3d23.057587715021683!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x395e9d0845742b0f%3A0x7e05407cae921b5a!2sPalladium%20Ahmedabad!5e0!3m2!1sen!2sin!4v1737664239524!5m2!1sen!2sin" 
                                loading="lazy" 
                                referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                </div>
            </div>			 		
        </div>    
        <div class="row">  	
            <div class="col-sm-8">
                <div class="contact-form">
                    <h2 class="title text-center mt-3">Get In Touch</h2>
                    <div class="status alert alert-success" style="display: none"></div>
                    <form id="main-contact-form" class="contact-form row mt-4" name="contact-form" method="POST">
                        {% csrf_token %}
                        <div class="form-group col-md-6">
                            <input type="text" name="name" class="form-control" required="required" placeholder="Name">
                        </div>
                        <div class="form-group col-md-6">
                            <input type="email" name="email" class="form-control" required="required" placeholder="Email">
                        </div>
                        <div class="form-group col-md-12">
                            <input type="text" name="subject" class="form-control" required="required" placeholder="Subject">
                        </div>
                        <div class="form-group col-md-12">
                            <textarea name="message" id="message" required="required" class="form-control" rows="8" placeholder="Your Message Here"></textarea>
                        </div>                        
                        <div class="form-group col-md-12">
                            <input type="submit" name="submit" class="btn btn-primary pull-right" value="Submit">
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="contact-info">
                    <h2 class="title text-center mt-3">Contact Info</h2>
                    <address class="mt-4">
                        <p>Photo Sharing Inc.</p>
                        <p>Palladium, Ahmedabad</p>
                        <p>Gujarat, India</p>
                        <p>Mobile : +91 123 4657 809</p>
                        <p>Email : info@photosharing.com</p>
                    </address>
                </div>
            </div>    			
        </div>  
    </div>	
</div>

<script>

    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('main-contact-form');
        let isSubmitted = false;
        
        if (form) {
            form.addEventListener('submit', function() {
                if (isSubmitted) {
                    event.preventDefault();
                    return false;
                }
                isSubmitted = true;
                return true;
            });
        }

    // Auto-close alerts after 3 seconds (Bootstrap 5 version)
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                const bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 3000);
    });
</script>

{% endblock %}